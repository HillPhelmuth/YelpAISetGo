@page "/primary-agent-chat"

@using YelpAIDemo.YelpComponents.AIChat

<PageTitle>Primary Agent Chat</PageTitle>

<div class="page">
	<header class="page-header">
		<h1 class="h3 mb-0">Primary Agent Chat</h1>
		<div class="page-subtitle text-body-secondary">
			Chat with the Yelp AI agent (streaming).
		</div>
	</header>

	<div class="page-body">
        <div class="chat" aria-label="Chat">
            <ChatMessageList Messages="Messages" />

            <ChatComposer @bind-Value="Input"
                          Disabled="IsBusy"
                          IsStreaming="IsBusy"
                          OnSend="SendAsync"
                          OnStop="Stop" />
        </div>
        <div>
            <ChatLog ChatResponses="AppState.RecentYelpAiResponses"></ChatLog>
        </div>
	</div>
</div>
@if (_destination is not null)
{
    <div class="map-modal-overlay">
        <div class="map-modal-content">
            <button class="map-modal-close-button" @onclick="() => _destination = null">✖️</button>
            <MapViewer Destination="_destination"></MapViewer>
        </div>
    </div>
}